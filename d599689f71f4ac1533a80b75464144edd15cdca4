The problem with the previous version was that it would write everything to pythonâ€™s stdin before starting to read from stdout.

If python starts to write to stdout, and fills up the buffer (as no-one is yet reading), python will stall writing, and if ruby then continues to write, and fills up that buffer (which python no longer empties) then ruby also stalls.
